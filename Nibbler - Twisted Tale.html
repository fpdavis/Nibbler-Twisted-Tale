<HTML>
<HEAD>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">

    <TITLE>Nibbler - Twisted Tale</TITLE>

    <script type="text/javascript" src="js/Declarations.js" defer="defer"></script>
    <script type="text/javascript" src="js/Utilities.js" defer="defer"></script>
    <script type="text/javascript" src="js/Animations.js" defer="defer"></script>
    <script type="text/javascript" src="js/astar.js" defer="defer"></script>
    <script type="text/javascript" src="js/Audio.js" defer="defer"></script>
    <script type="text/javascript" src="js/Brainspawn.js" defer="defer"></script>
    <script type="text/javascript" src="js/MazeGenerator.js" defer="defer"></script>
    <script type="text/javascript" src="js/MessageLog.js"></script>
    <script type="text/javascript" src="js/Nibbler.js" defer="defer"></script>
    <script type="text/javascript" src="js/Pathfinder.js" defer="defer"></script>
    <script type="text/javascript" src="js/Pellet.js" defer="defer"></script>

    <script type="text/javascript" src="Data/Music.json" defer="defer"></script>
    <script type="text/javascript" src="Data/Sound.json" defer="defer"></script>
    <script type="text/javascript" src="Data/Animations.js" defer="defer"></script>

    <script type="text/javascript" src="js/Nibbler - Twisted Tale.js" defer="defer"></script>

    <link rel="stylesheet" type="text/css" href="css/GameMenu.css">
    <link rel="stylesheet" type="text/css" href="css/Scoreboard.css">
</HEAD>

<BODY>

    <div id="divScoreboard">
        <div class="wrapper">
            <div class="box"><input id="colorPlayer1" type="color" value="#00FF00" onchange="oColorMenuPlayer[0].value = gaNibblers[0].fillStyle = this.value;"> <span id="spanPlayer1">Player 1 (-) 000</span></div>
            <div class="box"><input id="colorPlayer3" type="color" value="#0000FF" onchange="oColorMenuPlayer[2].value = gaNibblers[2].fillStyle = this.value;">&nbsp;<span id="spanPlayer3">Player 3 (-) 000</span></div>
            <div id="divTime" class="box blink_me">TIME ---</div>
        </div>
        <div class="wrapper">
            <div class="box"><input id="colorPlayer2" type="color" value="#FF0000" onchange="oColorMenuPlayer[1].value = gaNibblers[1].fillStyle = this.value;">&nbsp;<span id="spanPlayer2">Player 2 (-) 000</span></div>
            <div class="box"><input id="colorPlayer4" type="color" value="#FFFF00" onchange="oColorMenuPlayer[3].value = gaNibblers[3].fillStyle = this.value;">&nbsp;<span id="spanPlayer4">Player 4 (-) 000</span></div>
            <div id="divHighScore" class="box">HIGHSCORE (Player -) 000</div>
        </div>
    </div>

    <canvas id="canArena"></canvas>

    <div class="overlay" id="divGameMenu">
        <div class="modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 560 380" preserveAspectRatio="none">
                <line id="svg_3" fill="none" stroke="#000000" stroke-width="2" x1="2.0" y1="2.0" x2="558" y2="2.0" />
                <line id="svg_4" fill="none" stroke="#000000" stroke-width="2" x1="558" y1="378" x2="558" y2="2.0" />
                <line id="svg_2" fill="none" stroke="#000000" stroke-width="2" x1="2.0" y1="378" x2="558" y2="378" />
                <line id="svg_5" fill="none" stroke="#000000" stroke-width="2" x1="2.0" y1="2.0" x2="2.0" y2="378" />
            </svg>
            <div class="modal-inner menuwrapper">
                <div class="menuheader">
                    <h3>Game Options</h3>
                </div>
                <div class="menucolumn1">
                    <input id="colorMenuPlayer1" type="color" value="#00FF00" onchange="oColorPlayer[0].value = gaNibblers[0].fillStyle = this.value;" style="vertical-align: middle;">
                    <img  onclick="ShowControllerMenu(0);" src="https://d2.alternativeto.net/dist/icons/joypad_6268.png?width=64&height=64&mode=crop&upscale=false" style="height: 20px; vertical-align: middle; cursor: pointer;" />
                    <select id="selectPlayer1"><option selected>Human</option><option>Computer</option></select>
                    <input id="txtPlayer1Name" type="text" placeholder="Player 1" maxlength="10" size="10" />

                    <br />
                    <input id="colorMenuPlayer2" type="color" value="#FF0000" onchange="oColorPlayer[1].value = gaNibblers[1].fillStyle = this.value;" style="vertical-align: middle;">
                    <img onclick="ShowControllerMenu(1);" src="https://d2.alternativeto.net/dist/icons/joypad_6268.png?width=64&height=64&mode=crop&upscale=false" style="height: 20px; vertical-align: middle; cursor: pointer;" />
                    <select id="selectPlayer2"><option>Human</option><option>Computer</option><option selected>None</optionselected></select>
                    <input id="txtPlayer2Name" type="text" placeholder="Player 2" maxlength="10" size="10" />
                    <br />
                    <br />Lives:
                    <input type="range" id="rangeLives" min="1" max="10" value="3" oninput="this.nextElementSibling.value=this.value" style="vertical-align: middle;" />
                    <input type="number" id="numberLives" min="1" max="10" value="3" style="width: 33px" oninput="this.previousElementSibling.value=this.value" />

                    <br />Speed: <select id="selectSpeed"><option>Slow</option><option selected>Normal</option><option>Fast</option></select>
                </div>
                <div class="menucolumn3">
                    <input type="checkbox" id="chkDiagonalMovement" /><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked;">
                        Diagonal Movement
                    </span>
                    <br /><input type="checkbox" id="chkWallWrap" checked="checked" oninput="if (this.checked) {chkDeadlyWalls.checked = false }" /><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked; if (previousSibling.checked) {chkDeadlyWalls.checked = false }">
                        Wall Wrap
                    </span>
                    <br /><input type="checkbox" id="chkMaze" checked="checked" /><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked;">
                        Maze
                    </span>
                    <br /><input type="checkbox" id="chkNonStop"><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked;">Non-stop</span>
                </div>

                <div class="menucolumn2">
                    <input id="colorMenuPlayer3" type="color" value="#0000FF" onchange="oColorPlayer[2].value = gaNibblers[2].fillStyle = this.value;" style="vertical-align: middle;">
                    <img onclick="ShowControllerMenu(2);" src="https://d2.alternativeto.net/dist/icons/joypad_6268.png?width=64&height=64&mode=crop&upscale=false" style="height: 20px; vertical-align: middle; cursor: pointer;" />
                    <select id="selectPlayer3"><option>Human</option><option>Computer</option><option selected>None</option></select>
                    <input id="txtPlayer3Name" type="text" placeholder="Player 3" maxlength="10" size="10" />

                    <br />
                    <input id="colorMenuPlayer4" type="color" value="#FFFF00" onchange="oColorPlayer[3].value = gaNibblers[3].fillStyle = this.value;" style="vertical-align: middle;">
                    <img onclick="ShowControllerMenu(3);" src="https://d2.alternativeto.net/dist/icons/joypad_6268.png?width=64&height=64&mode=crop&upscale=false" style="height: 20px; vertical-align: middle; cursor: pointer;" />
                    <select id="selectPlayer4"><option>Human</option><option>Computer</option><option selected>None</option></select>
                    <input id="txtPlayer4Name" type="text" placeholder="Player 4" maxlength="10" size="10" />
                    <br /><br />
                    Arena Size: <select id="selectArenaSize"><option>Small</option><option selected>Medium</option><option>Large</option></select>
                    <br /><span style="margin-left: 8px;">
                        <input type="checkbox" id="chkTime" oninput="numberTime.disabled = !this.checked " />Timer:
                        <input type="number" id="numberTime" min="30" max="480" value="120" step="10" style="width: 72px" />
                    </span>
                </div>
                <div class="menucolumn4">
                    <input type="checkbox" id="chkDeadlyTails" checked="checked" /><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked;">
                        Deadly Tails
                    </span>
                    <br /><input type="checkbox" id="chkDeadlyWalls" oninput="if (this.checked) {chkWallWrap.checked = false }" /><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked; if (previousSibling.checked) {chkWallWrap.checked = false }">
                        Deadly Walls
                    </span>
                    <br /><input type="checkbox" id="chkInfiniteTails" /><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked;">Infinite Tails</span>
                    <br /><input type="checkbox" id="chkEnemies" /><span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked;">Enemies</span>
                </div>
                <div class="menufooter">
                    <span style="margin-left: 5px;">
                        Music Volume: [-]
                        <input type="range" id="rangeMusicVolume" min="0" max="1" step=".1" value=".5"
                               oninput="Music.Songs[giCurrentSong].volume=Music.Volume=this.value" style="vertical-align: middle;" /> [+]
                        (<input type="checkbox" id="chkMuteMusic" checked="checked"
                                oninput="Music.NotMuted=!this.checked; if (this.checked) { Music.Songs[giCurrentSong].pause() } else { Music.Songs[giCurrentSong].play();}" style="vertical-align: middle;" />
                        <span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked; Music.NotMuted=!this.checked; if (this.checked) { Music.Songs[giCurrentSong].pause() } else { Music.Songs.[giCurrentSong].play();}">
                            [M]ute)
                        </span>
                    </span>
                    <br />Effects Volume: [-]
                    <input type="range" id="rangeEffectsVolume" min="0" max="1" step=".1" value=".8"
                           oninput="Sounds.Volume=this.value" style="vertical-align: middle;" /> [+]
                    (<input type="checkbox" id="chkMuteEffects" checked="checked" oninput="Sounds.NotMuted=!this.checked" style="vertical-align: middle;" />
                    <span class="spanCheckPrevious" onclick="previousSibling.checked = !previousSibling.checked; Sounds.NotMuted=!this.checke">
                        [M]ute)
                    </span>

                    <input type="button" id="btnStart" Value="Start" class="modal-button" onclick="SetupArena();" />
                    <br /><br />
                    <div style="background: coral; opacity: .5; text-align: center; width: 542px;"> Hit [Esc] or [p] to Pause Game</div>
                </div>
            </div>
        </div>
    </div>

    <div class="overlay" id="divControllerMenu">
        <div class="modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 560 380" preserveAspectRatio="none">
                <line id="svg_3" fill="none" stroke="#000000" stroke-width="2" x1="2.0" y1="2.0" x2="558" y2="2.0" />
                <line id="svg_4" fill="none" stroke="#000000" stroke-width="2" x1="558" y1="378" x2="558" y2="2.0" />
                <line id="svg_2" fill="none" stroke="#000000" stroke-width="2" x1="2.0" y1="378" x2="558" y2="378" />
                <line id="svg_5" fill="none" stroke="#000000" stroke-width="2" x1="2.0" y1="2.0" x2="2.0" y2="378" />
            </svg>
            <div class="modal-inner menuwrapper">
                <div class="menuheader">
                    <h3>
                        Game Controler Options
                        <br />
                        <span id="hControllerMenuPlayerName">Player 1</span>
                    </h3>
                </div>
                <div class="menuwide">
                    Input Type: <select id="selectControllerType">
                        <option selected value="keyboard">Keyboard</option>
                        <option selected value="mouse">Mouse</option>
                    </select>
                </div>

                <div class="menufooter">

                    <br /><br />
                    <input type="button" id="btnSave" Value="Save" class="modal-button" onclick="HideControllerMenu(true);" />
                    <input type="button" id="btnCancel" Value="Cancel" class="modal-button" onclick="HideControllerMenu(false);" />
                </div>
            </div>
        </div>
    </div>
</BODY>
</HTML>